{"version":3,"sources":["../../../src/directives/scroll/index.ts"],"names":["mounted","el","binding","self","modifiers","value","options","passive","handler","target","arg","document","querySelector","window","addEventListener","_onScroll","undefined","unmounted","removeEventListener","updated","oldValue","Scroll"],"mappings":"AAYA,SAASA,OAAT,CAAkBC,EAAlB,EAAmCC,OAAnC,EAAoE;AAAA;;AAClE,QAAM;AAAEC,IAAAA,IAAI,GAAG;AAAT,4BAAmBD,OAAO,CAACE,SAA3B,iCAAwC,EAA9C;AACA,QAAMC,KAAK,GAAGH,OAAO,CAACG,KAAtB;AACA,QAAMC,OAAO,GAAI,OAAOD,KAAP,KAAiB,QAAjB,IAA6BA,KAAK,CAACC,OAApC,IAAgD;AAAEC,IAAAA,OAAO,EAAE;AAAX,GAAhE;AACA,QAAMC,OAAO,GAAG,OAAOH,KAAP,KAAiB,UAAjB,IAA+B,iBAAiBA,KAAhD,GAAwDA,KAAxD,GAAgEA,KAAK,CAACG,OAAtF;AAEA,QAAMC,MAAM,GAAGN,IAAI,GACfF,EADe,GAEfC,OAAO,CAACQ,GAAR,GACEC,QAAQ,CAACC,aAAT,CAAuBV,OAAO,CAACQ,GAA/B,CADF,GAEEG,MAJN;AAMA,MAAI,CAACJ,MAAL,EAAa;AAEbA,EAAAA,MAAM,CAACK,gBAAP,CAAwB,QAAxB,EAAkCN,OAAlC,EAA2CF,OAA3C;AAEAL,EAAAA,EAAE,CAACc,SAAH,GAAe;AACbP,IAAAA,OADa;AAEbF,IAAAA,OAFa;AAGb;AACAG,IAAAA,MAAM,EAAEN,IAAI,GAAGa,SAAH,GAAeP;AAJd,GAAf;AAMD;;AAED,SAASQ,SAAT,CAAoBhB,EAApB,EAAqC;AACnC,MAAI,CAACA,EAAE,CAACc,SAAR,EAAmB;AAEnB,QAAM;AAAEP,IAAAA,OAAF;AAAWF,IAAAA,OAAX;AAAoBG,IAAAA,MAAM,GAAGR;AAA7B,MAAoCA,EAAE,CAACc,SAA7C;AAEAN,EAAAA,MAAM,CAACS,mBAAP,CAA2B,QAA3B,EAAqCV,OAArC,EAA8CF,OAA9C;AACA,SAAOL,EAAE,CAACc,SAAV;AACD;;AAED,SAASI,OAAT,CAAkBlB,EAAlB,EAAmCC,OAAnC,EAAoE;AAClE,MAAIA,OAAO,CAACG,KAAR,KAAkBH,OAAO,CAACkB,QAA9B,EAAwC;AAExCH,EAAAA,SAAS,CAAChB,EAAD,CAAT;AACAD,EAAAA,OAAO,CAACC,EAAD,EAAKC,OAAL,CAAP;AACD;;AAED,OAAO,MAAMmB,MAAM,GAAG;AACpBrB,EAAAA,OADoB;AAEpBiB,EAAAA,SAFoB;AAGpBE,EAAAA;AAHoB,CAAf;AAMP,eAAeE,MAAf","sourcesContent":["import type { DirectiveBinding } from 'vue'\n\ninterface ScrollDirectiveBinding extends Omit<DirectiveBinding, 'modifiers'> {\n  value: EventListener | {\n    handler: EventListener\n    options?: AddEventListenerOptions\n  } | EventListenerObject & { options?: AddEventListenerOptions }\n  modifiers?: {\n    self?: boolean\n  }\n}\n\nfunction mounted (el: HTMLElement, binding: ScrollDirectiveBinding) {\n  const { self = false } = binding.modifiers ?? {}\n  const value = binding.value\n  const options = (typeof value === 'object' && value.options) || { passive: true }\n  const handler = typeof value === 'function' || 'handleEvent' in value ? value : value.handler\n\n  const target = self\n    ? el\n    : binding.arg\n      ? document.querySelector(binding.arg)\n      : window\n\n  if (!target) return\n\n  target.addEventListener('scroll', handler, options)\n\n  el._onScroll = {\n    handler,\n    options,\n    // Don't reference self\n    target: self ? undefined : target,\n  }\n}\n\nfunction unmounted (el: HTMLElement) {\n  if (!el._onScroll) return\n\n  const { handler, options, target = el } = el._onScroll\n\n  target.removeEventListener('scroll', handler, options)\n  delete el._onScroll\n}\n\nfunction updated (el: HTMLElement, binding: ScrollDirectiveBinding) {\n  if (binding.value === binding.oldValue) return\n\n  unmounted(el)\n  mounted(el, binding)\n}\n\nexport const Scroll = {\n  mounted,\n  unmounted,\n  updated,\n}\n\nexport default Scroll\n"],"file":"index.mjs"}