{"remainingRequest":"D:\\IdeaWorkSpace\\springBootDemo2\\myblog-vue2\\node_modules\\babel-loader\\lib\\index.js!D:\\IdeaWorkSpace\\springBootDemo2\\myblog-vue2\\node_modules\\vue-cli-plugin-quasar\\lib\\loader.js.transform-quasar-imports.js!D:\\IdeaWorkSpace\\springBootDemo2\\myblog-vue2\\node_modules\\vue-cli-plugin-quasar\\lib\\loader.vue.auto-import-quasar.js?kebab!D:\\IdeaWorkSpace\\springBootDemo2\\myblog-vue2\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-1!D:\\IdeaWorkSpace\\springBootDemo2\\myblog-vue2\\node_modules\\vue-loader-v16\\dist\\index.js??ref--0-2!D:\\IdeaWorkSpace\\springBootDemo2\\myblog-vue2\\src\\views\\ViewBlogContent.vue?vue&type=script&lang=js","dependencies":[{"path":"D:\\IdeaWorkSpace\\springBootDemo2\\myblog-vue2\\src\\views\\ViewBlogContent.vue","mtime":1626609491655},{"path":"D:\\IdeaWorkSpace\\springBootDemo2\\myblog-vue2\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\IdeaWorkSpace\\springBootDemo2\\myblog-vue2\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"D:\\IdeaWorkSpace\\springBootDemo2\\myblog-vue2\\node_modules\\vue-cli-plugin-quasar\\lib\\loader.js.transform-quasar-imports.js","mtime":499162500000},{"path":"D:\\IdeaWorkSpace\\springBootDemo2\\myblog-vue2\\node_modules\\vue-cli-plugin-quasar\\lib\\loader.vue.auto-import-quasar.js","mtime":499162500000},{"path":"D:\\IdeaWorkSpace\\springBootDemo2\\myblog-vue2\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\IdeaWorkSpace\\springBootDemo2\\myblog-vue2\\node_modules\\vue-loader-v16\\dist\\index.js","mtime":1624994108000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IEhlYWRlciBmcm9tICcuLi9jb21wb25lbnRzL0hlYWRlcic7CmltcG9ydCB7IEV5ZU91dGxpbmVkLCBMaWtlT3V0bGluZWQsIEVkaXRPdXRsaW5lZCB9IGZyb20gJ0BhbnQtZGVzaWduL2ljb25zLXZ1ZSc7CmltcG9ydCB7IGRlZmluZUNvbXBvbmVudCwgcmVmLCByZWFjdGl2ZSwgZ2V0Q3VycmVudEluc3RhbmNlLCBvbk1vdW50ZWQsIG9uQmVmb3JlTW91bnQgfSBmcm9tICd2dWUnOwppbXBvcnQgeyBtZXNzYWdlIH0gZnJvbSAnYW50LWRlc2lnbi12dWUnOyAvLyBpbXBvcnQgTWFya2Rvd25JdCBmcm9tICdtYXJrZG93bi1pdCcKLy8gaW1wb3J0IGhsanMgZnJvbSAnbWFya2Rvd24taXQtaGlnaGxpZ2h0anMnCgppbXBvcnQgbWFya2VkIGZyb20gJ21hcmtlZCc7CmltcG9ydCAnZ2l0aHViLW1hcmtkb3duLWNzcyc7CmV4cG9ydCBkZWZhdWx0IGRlZmluZUNvbXBvbmVudCh7CiAgbmFtZTogIlZpZXdCbG9nQ29udGVudCIsCiAgY29tcG9uZW50czogewogICAgSGVhZGVyOiBIZWFkZXIsCiAgICBFeWVPdXRsaW5lZDogRXllT3V0bGluZWQsCiAgICBMaWtlT3V0bGluZWQ6IExpa2VPdXRsaW5lZCwKICAgIEVkaXRPdXRsaW5lZDogRWRpdE91dGxpbmVkCiAgfSwKICBzZXR1cDogZnVuY3Rpb24gc2V0dXAoKSB7CiAgICB2YXIgX2dldEN1cnJlbnRJbnN0YW5jZSA9IGdldEN1cnJlbnRJbnN0YW5jZSgpLAogICAgICAgIHByb3h5ID0gX2dldEN1cnJlbnRJbnN0YW5jZS5wcm94eTsKCiAgICB2YXIgYmxvZyA9IHJlYWN0aXZlKHsKICAgICAgYmxvZzoge30KICAgIH0pOwogICAgdmFyIHVzZXJuYW1lID0gcmVmKCcnKTsKICAgIHZhciBpc0xpa2UgPSByZWYoZmFsc2UpOwogICAgdmFyIHNob3dDb250ZW50ID0gcmVmKGZhbHNlKTsKICAgIHZhciBibG9nSWQgPSBwcm94eS4kcm91dGUucGFyYW1zLmJsb2dJZDsKICAgIHZhciB1c2VySW5mbyA9IHByb3h5LiRzdG9yZS5nZXR0ZXJzLmdldFVzZXI7CiAgICB2YXIgdXNlcklkID0gcmVmKDApOwogICAgY29uc29sZS5sb2codXNlcklkKTsKCiAgICBpZiAodXNlckluZm8gIT09ICcnICYmIHVzZXJJbmZvICE9PSBudWxsKSB7CiAgICAgIHVzZXJJZC52YWx1ZSA9IHVzZXJJbmZvLmlkOwogICAgfQoKICAgIGNvbnNvbGUubG9nKHVzZXJJZCk7CgogICAgdmFyIGdldEJsb2cgPSBmdW5jdGlvbiBnZXRCbG9nKCkgewogICAgICBwcm94eS4kYXhpb3MuZ2V0KCcvZGV0YWlsLycgKyBibG9nSWQpLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICAgIHZhciBibG9nSW5mbyA9IHJlcy5kYXRhLmRhdGE7CiAgICAgICAgYmxvZy5ibG9nID0gYmxvZ0luZm87CiAgICAgICAgdXNlcm5hbWUudmFsdWUgPSByZXMuZGF0YS5tc2c7IC8vIGNvbnNvbGUubG9nKGxvY2FsU3RvcmFnZS5nZXRJdGVtKCd0b2tlbicpKQoKICAgICAgICBpZiAobG9jYWxTdG9yYWdlLmdldEl0ZW0oJ3Rva2VuJykgIT09IG51bGwgJiYgbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ3Rva2VuJykgIT09ICcnKSB7CiAgICAgICAgICBnZXRMaWtlZCgpOwogICAgICAgIH0KCiAgICAgICAgYmxvZy5ibG9nLmNvbnRlbnQgPSBtYXJrZWQoYmxvZy5ibG9nLmNvbnRlbnQpOwogICAgICAgIHNob3dDb250ZW50LnZhbHVlID0gdHJ1ZTsKICAgICAgfSk7CiAgICB9OwoKICAgIHZhciBnaXZlTGlrZSA9IGZ1bmN0aW9uIGdpdmVMaWtlKCkgewogICAgICBjb25zb2xlLmxvZyhibG9nLmJsb2cuaWQpOwogICAgICBwcm94eS4kYXhpb3MuZ2V0KCcvbGlrZT91c2VySWQ9JyArIHVzZXJJZC52YWx1ZSArICcmYmxvZ0lkPScgKyBibG9nLmJsb2cuaWQsIHsKICAgICAgICBoZWFkZXJzOiB7CiAgICAgICAgICAiQXV0aG9yaXphdGlvbiI6IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCd0b2tlbicpCiAgICAgICAgfQogICAgICB9KS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICBpZiAocmVzLmRhdGEuZGF0YSA9PT0gMSkgewogICAgICAgICAgaXNMaWtlLnZhbHVlID0gdHJ1ZTsKICAgICAgICAgIGJsb2cuYmxvZy5saWtlcyArPSAxOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBpc0xpa2UudmFsdWUgPSBmYWxzZTsKICAgICAgICAgIGJsb2cuYmxvZy5saWtlcyAtPSAxOwogICAgICAgIH0KICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKHJlYXNvbikgewogICAgICAgIG1lc3NhZ2UuZXJyb3IoJ+ivt+WFiOeZu+W9lScpOwogICAgICB9KTsKICAgIH07CgogICAgdmFyIGdldExpa2VkID0gZnVuY3Rpb24gZ2V0TGlrZWQoKSB7CiAgICAgIHByb3h5LiRheGlvcy5nZXQoJy9nZXRMaWtlP3VzZXJJZD0nICsgdXNlcklkLnZhbHVlICsgJyZibG9nSWQ9JyArIGJsb2cuYmxvZy5pZCwgewogICAgICAgIGhlYWRlcnM6IHsKICAgICAgICAgICJBdXRob3JpemF0aW9uIjogbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ3Rva2VuJykKICAgICAgICB9CiAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICAgIHZhciByZXNMaWtlZCA9IHJlcy5kYXRhLmRhdGE7CiAgICAgICAgY29uc29sZS5sb2cocmVzTGlrZWQpOwoKICAgICAgICBpZiAocmVzTGlrZWQgPT09IDApIHsKICAgICAgICAgIGlzTGlrZS52YWx1ZSA9IGZhbHNlOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBpc0xpa2UudmFsdWUgPSB0cnVlOwogICAgICAgIH0KICAgICAgfSk7CiAgICB9OwoKICAgIG9uTW91bnRlZChmdW5jdGlvbiAoKSB7CiAgICAgIGdldEJsb2coKTsKICAgIH0pOwogICAgcmV0dXJuIHsKICAgICAgYmxvZzogYmxvZywKICAgICAgdXNlcm5hbWU6IHVzZXJuYW1lLAogICAgICBpc0xpa2U6IGlzTGlrZSwKICAgICAgc2hvd0NvbnRlbnQ6IHNob3dDb250ZW50LAogICAgICBnaXZlTGlrZTogZ2l2ZUxpa2UsCiAgICAgIHVzZXJJZDogdXNlcklkCiAgICB9OwogIH0KfSk7"},{"version":3,"sources":["D:\\IdeaWorkSpace\\springBootDemo2\\myblog-vue2\\src\\views\\ViewBlogContent.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\r\n    <a-back-top />\r\n    <Header></Header>\r\n    <a-layout class=\"layout\">\r\n        <a-layout-content style=\"padding: 10px 50px;\">\r\n\r\n            <a-row type=\"flex\" justify=\"center\" style=\"width: 70%;margin: 0 auto;\">\r\n                <a-col :span=\"24\" >\r\n                    <div :style=\"{ background: '#fff', padding: '32px', minHeight: '580px', width: 'auto', textAlign: 'left'}\" v-show=\"!showContent\">\r\n                        <a-skeleton active :paragraph=\"{rows: 5, width: 'auto'}\"/>\r\n                        <a-skeleton active :paragraph=\"{rows: 5, width: 'auto'}\"/>\r\n                    </div>\r\n                    <div :style=\"{ background: '#fff', padding: '32px', minHeight: '580px', width: 'auto', textAlign: 'left'}\" v-show=\"showContent\">\r\n                        <a-typography-title>{{blog.blog.title}}</a-typography-title>\r\n                        <div style=\"width:auto\">\r\n                            <a-card style=\"width: auto; background: ghostwhite;\" size=\"small\">\r\n\r\n                                <a-row>\r\n                                    <a-col :span=\"24\">\r\n\r\n                                        <a-space :size=\"30\">\r\n                                            <span>\r\n                                                发布于:{{blog.blog.created}}\r\n                                            </span>\r\n                                            <span>\r\n                                                作者:{{username}}\r\n                                            </span>\r\n                                        <span>\r\n                                            {{blog.blog.scans}}\r\n                                            <eye-outlined/>\r\n                                        </span>\r\n                                        <span>\r\n                                            <a :style=\"{color: isLike? 'blue':'gray'}\" @click=\"giveLike\">{{blog.blog.likes}}\r\n                                            <like-outlined /></a>\r\n                                        </span>\r\n                                            <span>\r\n                                                <router-link :to=\"{path: '/edit/' + blog.blog.id}\" v-show=\"userId === blog.blog.userId\"><edit-outlined key=\"edit\"/>编辑</router-link>\r\n                                            </span>\r\n                                        </a-space>\r\n                                    </a-col>\r\n                                </a-row>\r\n                            </a-card>\r\n                        </div>\r\n                        <a-divider />\r\n                        <div style=\"margin-top: 10px\">\r\n\r\n                                    <a-typography-paragraph strong=\"true\">\r\n                                        <blockquote>{{blog.blog.description}}</blockquote>\r\n                                    </a-typography-paragraph>\r\n\r\n\r\n                        </div>\r\n                        <a-divider />\r\n                        <div class=\"markdown-body\" v-html=\"blog.blog.content\" v-highlight>\r\n\r\n                        </div>\r\n                    </div>\r\n                </a-col>\r\n            </a-row>\r\n        </a-layout-content>\r\n    </a-layout>\r\n</template>\r\n\r\n<script>\r\n    import Header from '../components/Header'\r\n    import {EyeOutlined, LikeOutlined, EditOutlined} from '@ant-design/icons-vue'\r\n    import {defineComponent, ref, reactive, getCurrentInstance, onMounted, onBeforeMount} from 'vue'\r\n    import {message} from 'ant-design-vue'\r\n    // import MarkdownIt from 'markdown-it'\r\n    // import hljs from 'markdown-it-highlightjs'\r\n    import marked from 'marked'\r\n    import 'github-markdown-css'\r\n    export default defineComponent({\r\n        name: \"ViewBlogContent\",\r\n        components: {\r\n            Header,\r\n            EyeOutlined,\r\n            LikeOutlined,\r\n            EditOutlined,\r\n        },\r\n        setup(){\r\n            const {proxy} = getCurrentInstance()\r\n            let blog = reactive({blog:{}})\r\n            let username = ref('')\r\n            let isLike = ref(false)\r\n            let showContent = ref(false)\r\n            const blogId = proxy.$route.params.blogId\r\n            const userInfo = proxy.$store.getters.getUser\r\n            let userId = ref(0)\r\n            console.log(userId)\r\n            if(userInfo !== '' && userInfo !== null){\r\n                userId.value = userInfo.id\r\n            }\r\n            console.log(userId)\r\n\r\n            const getBlog = () => {\r\n                proxy.$axios.get('/detail/' + blogId).then(res => {\r\n                    const blogInfo = res.data.data\r\n                    blog.blog = blogInfo\r\n                    username.value = res.data.msg\r\n                    // console.log(localStorage.getItem('token'))\r\n                    if(localStorage.getItem('token') !== null && localStorage.getItem('token') !== ''){\r\n                        getLiked()\r\n                    }\r\n\r\n                    blog.blog.content = marked(blog.blog.content)\r\n                    showContent.value = true\r\n\r\n                })\r\n            }\r\n            const giveLike = () => {\r\n                        console.log(blog.blog.id)\r\n                        proxy.$axios.get('/like?userId=' + userId.value + '&blogId=' + blog.blog.id , {\r\n                            headers:{\r\n                                \"Authorization\": localStorage.getItem('token')\r\n                            }\r\n                        }).then(res => {\r\n                            if(res.data.data === 1){\r\n                                isLike.value = true\r\n                                blog.blog.likes += 1\r\n                            }else{\r\n                                isLike.value = false\r\n                                blog.blog.likes -= 1\r\n                            }\r\n                        }).catch(reason => {\r\n                            message.error('请先登录')\r\n                        })\r\n                }\r\n            const getLiked = () => {\r\n                    proxy.$axios.get('/getLike?userId=' + userId.value + '&blogId=' + blog.blog.id,\r\n                        {headers: {\r\n                                \"Authorization\": localStorage.getItem('token')\r\n                            }}\r\n                    ).then(res => {\r\n                        const resLiked = res.data.data\r\n                        console.log(resLiked)\r\n                        if(resLiked === 0){\r\n                            isLike.value = false\r\n                        }else{\r\n                            isLike.value = true\r\n                        }\r\n                    })\r\n            }\r\n\r\n\r\n            onMounted(() => {\r\n              getBlog()\r\n            })\r\n            return {\r\n                blog,\r\n                username,\r\n                isLike,\r\n                showContent,\r\n                giveLike,\r\n                userId,\r\n\r\n            }\r\n        }\r\n    })\r\n</script>\r\n\r\n<style>\r\n    img{\r\n        width: 60%;\r\n        height: auto;\r\n    }\r\n</style>"],"sourceRoot":""}]}