{"remainingRequest":"D:\\IdeaWorkSpace\\springBootDemo2\\myblog-vue2\\node_modules\\babel-loader\\lib\\index.js!D:\\IdeaWorkSpace\\springBootDemo2\\myblog-vue2\\node_modules\\vue-cli-plugin-quasar\\lib\\loader.js.transform-quasar-imports.js!D:\\IdeaWorkSpace\\springBootDemo2\\myblog-vue2\\src\\permission.js","dependencies":[{"path":"D:\\IdeaWorkSpace\\springBootDemo2\\myblog-vue2\\src\\permission.js","mtime":1626429264596},{"path":"D:\\IdeaWorkSpace\\springBootDemo2\\myblog-vue2\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\IdeaWorkSpace\\springBootDemo2\\myblog-vue2\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"D:\\IdeaWorkSpace\\springBootDemo2\\myblog-vue2\\node_modules\\vue-cli-plugin-quasar\\lib\\loader.js.transform-quasar-imports.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZy5qcyI7CmltcG9ydCByb3V0ZXIgZnJvbSAiLi9yb3V0ZXIiOwppbXBvcnQgeyBNb2RhbCB9IGZyb20gImFudC1kZXNpZ24tdnVlIjsKdmFyIGZsYWcgPSBmYWxzZTsKcm91dGVyLmJlZm9yZUVhY2goZnVuY3Rpb24gKHRvLCBmcm9tLCBuZXh0KSB7CiAgaWYgKHRvLm1hdGNoZWQuc29tZShmdW5jdGlvbiAocmVjb3JkKSB7CiAgICByZXR1cm4gcmVjb3JkLm1ldGEucmVxdWlyZUF1dGg7CiAgfSkpIHsKICAgIGNvbnNvbGUubG9nKCfov5vlhaXmraTlpIQnKTsKICAgIHZhciB0b2tlbiA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCJ0b2tlbiIpOwogICAgdmFyIHVzZXJJbmZvID0gc2Vzc2lvblN0b3JhZ2UuZ2V0SXRlbSgndXNlckluZm8nKTsKCiAgICBpZiAodG9rZW4pIHsKICAgICAgY29uc29sZS5sb2codXNlckluZm8pOwogICAgICBjb25zb2xlLmxvZyh0b2tlbik7CiAgICAgIGNvbnNvbGUubG9nKCd0b2tlbumqjOivgScpOwogICAgICBmbGFnID0gdHJ1ZTsKICAgICAgbmV4dCgpOwogICAgfSBlbHNlIHsKICAgICAgbmV4dCh7CiAgICAgICAgcGF0aDogJy9sb2dpbicKICAgICAgfSk7CiAgICB9CiAgfSBlbHNlIHsKICAgIGlmICh0by5wYXRoID09PSAnL2xvZ2luJykgewogICAgICBuZXh0KCk7CiAgICB9IGVsc2UgewogICAgICBpZiAoZmxhZykgewogICAgICAgIE1vZGFsLmNvbmZpcm0oewogICAgICAgICAgdGl0bGU6ICfor7fmn6XnnIvkvaDmmK/lkKbkv53lrZjlhoXlrrknLAogICAgICAgICAgY29udGVudDogJ+S9oOehruWumuimgei3s+i9rOWIsOWFtuWug+e9kemhte+8nycsCiAgICAgICAgICBvbk9rOiBmdW5jdGlvbiBvbk9rKCkgewogICAgICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkgewogICAgICAgICAgICAgIHNldFRpbWVvdXQoTWF0aC5yYW5kb20oKSA+IDAuNSA/IHJlc29sdmUgOiByZWplY3QsIDIwMCk7CiAgICAgICAgICAgICAgbmV4dCgpOwogICAgICAgICAgICB9KS5jYXRjaChmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgcmV0dXJuIGNvbnNvbGUubG9nKCdPb3BzIGVycm9ycyEnKTsKICAgICAgICAgICAgfSk7CiAgICAgICAgICB9LAogICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1lbXB0eS1mdW5jdGlvbgogICAgICAgICAgb25DYW5jZWw6IGZ1bmN0aW9uIG9uQ2FuY2VsKCkgewogICAgICAgICAgICBuZXh0KGZhbHNlKTsKICAgICAgICAgIH0KICAgICAgICB9KTsKICAgICAgfSBlbHNlIHsKICAgICAgICBuZXh0KCk7CiAgICAgIH0KICAgIH0KICB9CgogIGlmICh0by5tZXRhLnRpdGxlKSB7CiAgICBkb2N1bWVudC50aXRsZSA9ICfkuKrkurrljZrlrqItJyArIHRvLm1ldGEudGl0bGU7CiAgfSBlbHNlIHsKICAgIGRvY3VtZW50LnRpdGxlID0gJ+S4quS6uuWNmuWuoic7CiAgfQp9KTs="},{"version":3,"sources":["D:/IdeaWorkSpace/springBootDemo2/myblog-vue2/src/permission.js"],"names":["router","Modal","flag","beforeEach","to","from","next","matched","some","record","meta","requireAuth","console","log","token","localStorage","getItem","userInfo","sessionStorage","path","confirm","title","content","onOk","Promise","resolve","reject","setTimeout","Math","random","catch","onCancel","document"],"mappings":";AAAA,OAAOA,MAAP,MAAmB,UAAnB;AACA,SAAQC,KAAR,QAAoB,gBAApB;AACA,IAAIC,IAAI,GAAG,KAAX;AACAF,MAAM,CAACG,UAAP,CAAkB,UAACC,EAAD,EAAKC,IAAL,EAAWC,IAAX,EAAoB;AAClC,MAAGF,EAAE,CAACG,OAAH,CAAWC,IAAX,CAAgB,UAAAC,MAAM;AAAA,WAAIA,MAAM,CAACC,IAAP,CAAYC,WAAhB;AAAA,GAAtB,CAAH,EAAsD;AAClDC,IAAAA,OAAO,CAACC,GAAR,CAAY,MAAZ;AACA,QAAMC,KAAK,GAAGC,YAAY,CAACC,OAAb,CAAqB,OAArB,CAAd;AACA,QAAMC,QAAQ,GAAGC,cAAc,CAACF,OAAf,CAAuB,UAAvB,CAAjB;;AACA,QAAGF,KAAH,EAAS;AACLF,MAAAA,OAAO,CAACC,GAAR,CAAYI,QAAZ;AACAL,MAAAA,OAAO,CAACC,GAAR,CAAYC,KAAZ;AACAF,MAAAA,OAAO,CAACC,GAAR,CAAY,SAAZ;AACAX,MAAAA,IAAI,GAAG,IAAP;AACAI,MAAAA,IAAI;AACP,KAND,MAMK;AACDA,MAAAA,IAAI,CAAC;AACDa,QAAAA,IAAI,EAAE;AADL,OAAD,CAAJ;AAGH;AACJ,GAfD,MAeK;AACD,QAAGf,EAAE,CAACe,IAAH,KAAY,QAAf,EAAwB;AACpBb,MAAAA,IAAI;AACP,KAFD,MAEM;AACF,UAAIJ,IAAJ,EAAU;AACND,QAAAA,KAAK,CAACmB,OAAN,CAAc;AACVC,UAAAA,KAAK,EAAE,YADG;AAEVC,UAAAA,OAAO,EAAE,cAFC;AAGVC,UAAAA,IAHU,kBAGH;AACH,mBAAO,IAAIC,OAAJ,CAAY,UAACC,OAAD,EAAUC,MAAV,EAAqB;AACpCC,cAAAA,UAAU,CAACC,IAAI,CAACC,MAAL,KAAgB,GAAhB,GAAsBJ,OAAtB,GAAgCC,MAAjC,EAAyC,GAAzC,CAAV;AACApB,cAAAA,IAAI;AACP,aAHM,EAGJwB,KAHI,CAGE;AAAA,qBAAMlB,OAAO,CAACC,GAAR,CAAY,cAAZ,CAAN;AAAA,aAHF,CAAP;AAIH,WARS;AAUV;AACAkB,UAAAA,QAXU,sBAWC;AACPzB,YAAAA,IAAI,CAAC,KAAD,CAAJ;AACH;AAbS,SAAd;AAeH,OAhBD,MAgBK;AACDA,QAAAA,IAAI;AACP;AACJ;AACJ;;AAED,MAAGF,EAAE,CAACM,IAAH,CAAQW,KAAX,EAAiB;AACbW,IAAAA,QAAQ,CAACX,KAAT,GAAiB,UAAUjB,EAAE,CAACM,IAAH,CAAQW,KAAnC;AACH,GAFD,MAEK;AACDW,IAAAA,QAAQ,CAACX,KAAT,GAAiB,MAAjB;AACH;AACJ,CA/CD","sourcesContent":["import router from \"./router\";\r\nimport {Modal} from \"ant-design-vue\";\r\nvar flag = false;\r\nrouter.beforeEach((to, from, next) => {\r\n    if(to.matched.some(record => record.meta.requireAuth)){\r\n        console.log('进入此处')\r\n        const token = localStorage.getItem(\"token\");\r\n        const userInfo = sessionStorage.getItem('userInfo')\r\n        if(token){\r\n            console.log(userInfo)\r\n            console.log(token)\r\n            console.log('token验证')\r\n            flag = true\r\n            next()\r\n        }else{\r\n            next({\r\n                path: '/login'\r\n            })\r\n        }\r\n    }else{\r\n        if(to.path === '/login'){\r\n            next()\r\n        }else {\r\n            if (flag) {\r\n                Modal.confirm({\r\n                    title: '请查看你是否保存内容',\r\n                    content: '你确定要跳转到其它网页？',\r\n                    onOk() {\r\n                        return new Promise((resolve, reject) => {\r\n                            setTimeout(Math.random() > 0.5 ? resolve : reject, 200);\r\n                            next()\r\n                        }).catch(() => console.log('Oops errors!'));\r\n                    },\r\n\r\n                    // eslint-disable-next-line @typescript-eslint/no-empty-function\r\n                    onCancel() {\r\n                        next(false)\r\n                    },\r\n                });\r\n            }else{\r\n                next()\r\n            }\r\n        }\r\n    }\r\n\r\n    if(to.meta.title){\r\n        document.title = '个人博客-' + to.meta.title\r\n    }else{\r\n        document.title = '个人博客'\r\n    }\r\n})"]}]}